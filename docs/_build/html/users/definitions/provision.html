

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Provision &mdash; Teflo 0.1.2 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_override.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../../',
              VERSION:'0.1.2',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Orchestrate" href="orchestrate.html" />
    <link rel="prev" title="Including Scenarios" href="include.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> Teflo
          

          
          </a>

          
            
            
              <div class="version">
                0.1.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Installation &amp; Configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Install Teflo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration.html">Configure Teflo</a></li>
</ul>
<p class="caption"><span class="caption-text">Using Teflo</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">User’s Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html#detailed-information">Detailed Information</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../scenario_descriptor.html">Scenario Descriptor</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="resource_check.html">Resource Check</a></li>
<li class="toctree-l3"><a class="reference internal" href="credentials.html">Credentials</a></li>
<li class="toctree-l3"><a class="reference internal" href="include.html">Including Scenarios</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Provision</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#provisioning-systems-from-beaker">Provisioning Systems from Beaker</a></li>
<li class="toctree-l4"><a class="reference internal" href="#provisioning-systems-from-openstack">Provisioning Systems from OpenStack</a></li>
<li class="toctree-l4"><a class="reference internal" href="#provisioning-openstack-assets-using-teflo-openstack-client-plugin">Provisioning Openstack Assets using teflo_openstack_client_plugin</a></li>
<li class="toctree-l4"><a class="reference internal" href="#provisioning-assets-with-linchpin">Provisioning Assets with Linchpin</a></li>
<li class="toctree-l4"><a class="reference internal" href="#defining-static-machines">Defining Static Machines</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="orchestrate.html">Orchestrate</a></li>
<li class="toctree-l3"><a class="reference internal" href="execute.html">Execute</a></li>
<li class="toctree-l3"><a class="reference internal" href="report.html">Report</a></li>
<li class="toctree-l3"><a class="reference internal" href="notifications.html">Notification</a></li>
<li class="toctree-l3"><a class="reference internal" href="timeout.html">Timeout settings for Teflo Tasks</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../data_pass_through.html">Data Pass-through</a></li>
<li class="toctree-l2"><a class="reference internal" href="../output.html">Teflo Output</a></li>
<li class="toctree-l2"><a class="reference internal" href="../examples.html">Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../best_practices.html">Best Practices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../localhost.html">Using Localhost</a></li>
<li class="toctree-l2"><a class="reference internal" href="../variable_data.html">Using Jinja Variable Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../resource_labels.html">Using Resource Labels</a></li>
<li class="toctree-l2"><a class="reference internal" href="../faqs.html">FAQS</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Teflo Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../developers/index.html">Developer’s Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contact.html">Contacts</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Teflo</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">User’s Guide</a> &raquo;</li>
        
          <li><a href="../scenario_descriptor.html">Scenario Descriptor</a> &raquo;</li>
        
      <li>Provision</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/users/definitions/provision.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="provision">
<h1>Provision<a class="headerlink" href="#provision" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>The input for provisioning will depend upon the type of resource you are
trying to provision. The current support for provisioning resources are:
<a class="reference internal" href="#beaker-provisioning"><span class="std std-ref">Beaker</span></a> and <a class="reference internal" href="#openstack-provisioning"><span class="std std-ref">OpenStack</span></a>.
The Beaker and OpenStack resources are provisioned with Teflo’s native
provisioners but as of 1.2.0, these resources can also be provisioned using
the <a class="reference internal" href="#linchpin-provisioning"><span class="std std-ref">Linchpin</span></a> provisioner.</p>
<div class="section" id="provision-resource">
<h3>Provision Resource<a class="headerlink" href="#provision-resource" title="Permalink to this headline">¶</a></h3>
<p>Each resource defined within a provision section can have the following
common keys, and the table below will describe whether the keys are
required or optional:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="nt">provision</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;name&gt;</span>
    <span class="nt">role</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;role&gt;</span>
    <span class="nt">provisioner</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;provisioner&gt;</span>
    <span class="nt">metadata</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;dict_key_values&gt;</span>
    <span class="nt">ansible_params</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;dict_key_values&gt;</span>
    <span class="nt">provider</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;dict_key_values&gt;</span>
</pre></div>
</div>
<table border="1" class="colwidths-auto docutils">
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">Description</th>
<th class="head">Type</th>
<th class="head">Required</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>name</td>
<td>The name of the asset to provision.</td>
<td>String</td>
<td>True</td>
</tr>
<tr class="row-odd"><td>role/groups</td>
<td>The names of the roles or groups for the asset. Used to
assign host assets to groups when generating the Ansible
inventory files.</td>
<td>List</td>
<td>False</td>
</tr>
<tr class="row-even"><td>provisioner</td>
<td>The name of the provisioner to use to provision assets.</td>
<td>String</td>
<td>False</td>
</tr>
<tr class="row-odd"><td>metadata</td>
<td>Data that the resource may need access to after provisioning is
finished. This data is passed through and is not modified by teflo
framework.</td>
<td>Dict</td>
<td>False</td>
</tr>
<tr class="row-even"><td>ansible_params</td>
<td>Ansible parameters to be used within a inventory file to control how
ansible communicates with the host asset.</td>
<td>Dict</td>
<td>False</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="provisioner">
<h3>Provisioner<a class="headerlink" href="#provisioner" title="Permalink to this headline">¶</a></h3>
<p>As of 1.6.0, this key is will be a requirement to specify. We will still be backwards compatible
for users who do not use this key in conjuction with the <strong>provider</strong> key. But at some point in
the future will be making this a hard requirement. So it is recommended to update all scenarios
to start explicitly using this key.</p>
</div>
<div class="section" id="provider">
<h3>Provider<a class="headerlink" href="#provider" title="Permalink to this headline">¶</a></h3>
<p>As of 1.6.0, the provider key is no longer a requirement for all provisioners. Going forward this
key is only required for the <strong>bkr-client</strong> and <strong>openstack-libcloud</strong> provisioners.</p>
</div>
<div class="section" id="role-groups">
<h3>Role/Groups<a class="headerlink" href="#role-groups" title="Permalink to this headline">¶</a></h3>
<p>Teflo roles are the equivalent of Ansible groups. As of 1.2.0, we’ve
changed the schema from role to groups to better reflect what the purpose of this
parameter is intended for. All scenario descriptor files written prior to 1.2.0
using role will still be honored but it is considered deprecated and it is recommended to
update all scenarios to use the new parameter.</p>
<p>As of 1.4.0 role/groups is not a requirement for all asset types. This should only be
specified for host assets like VMs or Baremetal Systems that have an ip and will be acted
on later on during Orchestrate or Execute. Assets like networks, storage, security key, etc.
do not and should not be assigned a role/groups to avoid polluting the Ansible inventory file
with empty groups.</p>
<p>You can associate a number of roles or groups to a host in a couple of different ways.
First is to define your roles in a comma separated string</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">---</span>
<span class="n">provision</span><span class="p">:</span>
<span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">ci_test_client_b</span>
  <span class="n">role</span><span class="p">:</span> <span class="n">client</span><span class="p">,</span> <span class="n">vnc</span>
  <span class="n">provider</span><span class="p">:</span> <span class="n">beaker</span>
</pre></div>
</div>
<p>You can also define your roles as a list.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">---</span>
<span class="n">provision</span><span class="p">:</span>
<span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">ci_test_client_b</span>
  <span class="n">role</span><span class="p">:</span>
    <span class="o">-</span> <span class="n">client</span>
    <span class="o">-</span> <span class="n">vnc</span>
  <span class="n">provider</span><span class="p">:</span> <span class="n">beaker</span>
</pre></div>
</div>
<p>Here we have defined a list of groups.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">---</span>
<span class="n">provision</span><span class="p">:</span>
<span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">ci_test_client_b</span>
  <span class="n">groups</span><span class="p">:</span>
  <span class="o">-</span> <span class="n">client</span>
  <span class="o">-</span> <span class="n">vnc</span>
  <span class="n">provider</span><span class="p">:</span> <span class="n">beaker</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="provisioning-systems-from-beaker">
<span id="beaker-provisioning"></span><h2>Provisioning Systems from Beaker<a class="headerlink" href="#provisioning-systems-from-beaker" title="Permalink to this headline">¶</a></h2>
<div class="section" id="credentials">
<h3>Credentials<a class="headerlink" href="#credentials" title="Permalink to this headline">¶</a></h3>
<p>To authenticate with Beaker, you will need to have your Beaker credentials
in your teflo.cfg file, see <a class="reference external" href="credentials.html#beaker-credentials">Beaker Credentials</a> for more details.</p>
</div>
<div class="section" id="beaker-resource">
<h3>Beaker Resource<a class="headerlink" href="#beaker-resource" title="Permalink to this headline">¶</a></h3>
<p>The following shows all the possible keys for defining a
provisioning resource for Beaker using the <strong>bkr-client</strong> provisioner:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="nt">provision</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;name&gt;</span>
    <span class="nt">role</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;role&gt;</span>
    <span class="nt">provisioner</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;provisioner&gt;</span>
    <span class="nt">provider</span><span class="p">:</span>
      <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">beaker</span>
      <span class="nt">credential</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;credential&gt;</span>
      <span class="nt">arch</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;arch&gt;</span>
      <span class="nt">variant</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;variant&gt;</span>
      <span class="nt">family</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;family&gt;</span>
      <span class="nt">distro</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;os_distro&gt;</span>
      <span class="nt">whiteboard</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;whiteboard&gt;</span>
      <span class="nt">jobgroup</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;group_id&gt;</span>
      <span class="nt">tag</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;tag&gt;</span>
      <span class="nt">host_requires_options</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">&lt;list of host options&gt;</span><span class="p p-Indicator">]</span>
      <span class="nt">key_values</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">&lt;list of key/value pairs defining the host&gt;</span><span class="p p-Indicator">]</span>
      <span class="nt">distro_requires_options</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">&lt;list of distro options&gt;</span><span class="p p-Indicator">]</span>
      <span class="nt">virtual_machine</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;True or False&gt;</span>
      <span class="nt">virt_capable</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;True or False&gt;</span>
      <span class="nt">priority</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;priority of the job&gt;</span>
      <span class="nt">retention_tag</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;retention tag&gt;</span>
      <span class="nt">timeout</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;timeout val for Beaker job&gt;</span>
      <span class="nt">kernel_options</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">&lt;list of kernel options&gt;</span><span class="p p-Indicator">]</span>
      <span class="nt">kernel_post_options</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">&lt;list of kernel post options&gt;</span><span class="p p-Indicator">]</span>
      <span class="nt">kickstart</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt; Filename of kickstart file&gt;</span>
      <span class="nt">ignore_panic</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;True or False&gt;</span>
      <span class="nt">taskparam</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">&lt;list of task parameter settings&gt;</span><span class="p p-Indicator">]</span>
      <span class="nt">ksmeta</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">&lt;list of kick start meta OPTIONS&gt;</span><span class="p p-Indicator">]</span>
    <span class="nt">metadata</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;dict_key_values&gt;</span>
    <span class="nt">ansible_params</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;dict_key_values&gt;</span>
</pre></div>
</div>
<table border="1" class="colwidths-auto docutils">
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">Description</th>
<th class="head">Type</th>
<th class="head">Required</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>name</td>
<td>The name to identify the provider (beaker).</td>
<td>String</td>
<td>True</td>
</tr>
<tr class="row-odd"><td>credential</td>
<td>The name of the credentials to use to boot node. This is the one
defined in the credentials section of the teflo config file.</td>
<td>String</td>
<td>True</td>
</tr>
<tr class="row-even"><td>arch</td>
<td>The arch of the node.</td>
<td>String</td>
<td>True</td>
</tr>
<tr class="row-odd"><td>variant</td>
<td>The OS variant of the node.</td>
<td>String</td>
<td>True</td>
</tr>
<tr class="row-even"><td>family</td>
<td>The OS family of the node. (family or distro needs to be set)</td>
<td>String</td>
<td>False</td>
</tr>
<tr class="row-odd"><td>distro</td>
<td>The specific OS distribution. (family or distro needs to be set)</td>
<td>String</td>
<td>False</td>
</tr>
<tr class="row-even"><td>whiteboard</td>
<td>The name to set for the Beaker whiteboard to help identify your job.</td>
<td>String</td>
<td>False</td>
</tr>
<tr class="row-odd"><td>jobgroup</td>
<td>The name of the beaker group to set, of who can see the machines and used for machine searching.</td>
<td>String</td>
<td>False</td>
</tr>
<tr class="row-even"><td>tag</td>
<td>The name of a tag to get the correct OS (i.e. RTT-ACCEPTED).</td>
<td>String</td>
<td>False</td>
</tr>
<tr class="row-odd"><td>host_requires_options</td>
<td>List of host options with the format:[“&lt;key&gt;&lt;operand&gt;&lt;value&gt;”].</td>
<td>List</td>
<td>False</td>
</tr>
<tr class="row-even"><td>key_values</td>
<td>List of key/value pairs defining the host, with the format:[“&lt;key&gt;&lt;operand&gt;&lt;value&gt;”].</td>
<td>List</td>
<td>False</td>
</tr>
<tr class="row-odd"><td>distro_requires_options</td>
<td>List of OS options with the format:[“&lt;key&gt;&lt;operand&gt;&lt;value&gt;”].</td>
<td>List</td>
<td>False</td>
</tr>
<tr class="row-even"><td>kernel_options</td>
<td>List of Beaker kernel options during install with the format:[“&lt;key&gt;&lt;operand&gt;&lt;value&gt;”]</td>
<td>List</td>
<td>False</td>
</tr>
<tr class="row-odd"><td>kernel_options_post</td>
<td>List of Beaker kernel options after install with the format:[“&lt;key&gt;&lt;operand&gt;&lt;value&gt;”]</td>
<td>List</td>
<td>False</td>
</tr>
<tr class="row-even"><td>virtual_machine</td>
<td>Look for a node that is a virtural machine.</td>
<td>Boolean</td>
<td>False</td>
</tr>
<tr class="row-odd"><td>virt_capable</td>
<td>Look for a machine that is virt capable.</td>
<td>Boolean</td>
<td>False</td>
</tr>
<tr class="row-even"><td>priority</td>
<td>Set the priority of the Beaker job.</td>
<td>String</td>
<td>False</td>
</tr>
<tr class="row-odd"><td>retention_tag</td>
<td>Set the tag value of how long to keep the job results.</td>
<td>String</td>
<td>False</td>
</tr>
<tr class="row-even"><td>ssh_key</td>
<td>Name of the ssh key to inject to the test system, file must be
placed in your scenario workspace directory.</td>
<td>String</td>
<td>False</td>
</tr>
<tr class="row-odd"><td>username</td>
<td>username of the Beaker machine, required if using <strong>ssh_key</strong>.</td>
<td>String</td>
<td>False</td>
</tr>
<tr class="row-even"><td>password</td>
<td>password of the Beaker machine, required if using <strong>ssh_key</strong>.</td>
<td>String</td>
<td>False</td>
</tr>
<tr class="row-odd"><td>timeout</td>
<td>Set a value of how long to wait for the Beaker job in seconds.(Default is 8hrs = 28800)</td>
<td>Boolean</td>
<td>False</td>
</tr>
<tr class="row-even"><td>kickstart</td>
<td>Name of the kickstart template for installation, the file must be
placed in your scenario workspace directory.</td>
<td>String</td>
<td>False</td>
</tr>
<tr class="row-odd"><td>ignore_panic</td>
<td>Do not abort job if panic message appears on serial console</td>
<td>Boolean</td>
<td>False</td>
</tr>
<tr class="row-even"><td>taskparam</td>
<td>parameter settings of form NAME=VALUE that will be set for every task in job</td>
<td>List</td>
<td>False</td>
</tr>
<tr class="row-odd"><td>ksmeta</td>
<td>kickstart metadata OPTIONS for when generating kickstart</td>
<td>List</td>
<td>False</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">---</span>

<span class="n">name</span><span class="p">:</span> <span class="n">beaker</span> <span class="n">resource</span>
<span class="n">description</span><span class="p">:</span> <span class="n">define</span> <span class="n">a</span> <span class="n">teflo</span> <span class="n">host</span> <span class="n">beaker</span> <span class="n">resource</span> <span class="n">to</span> <span class="n">be</span> <span class="n">provisioned</span>

<span class="n">provision</span><span class="p">:</span>
  <span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">beaker</span><span class="o">-</span><span class="n">node</span>
    <span class="n">role</span><span class="p">:</span> <span class="n">node</span>
    <span class="n">provider</span><span class="p">:</span>
      <span class="n">name</span><span class="p">:</span> <span class="n">beaker</span>
      <span class="n">credential</span><span class="p">:</span> <span class="n">beaker</span><span class="o">-</span><span class="n">creds</span>
      <span class="n">arch</span><span class="p">:</span> <span class="n">x86_64</span>
      <span class="n">distro</span><span class="p">:</span> <span class="n">RHEL</span><span class="o">-</span><span class="mf">7.5</span>
      <span class="n">variant</span><span class="p">:</span> <span class="n">Server</span>
      <span class="n">whiteboard</span><span class="p">:</span> <span class="n">teflo</span> <span class="n">beaker</span> <span class="n">resource</span> <span class="n">example</span>
      <span class="n">jobgroup</span><span class="p">:</span> <span class="s1">&#39;{{ jobgroup }}&#39;</span>
      <span class="n">username</span><span class="p">:</span> <span class="s1">&#39;{{ username }}&#39;</span>
      <span class="n">password</span><span class="p">:</span> <span class="s1">&#39;{{ password }}&#39;</span>
      <span class="n">host_requires_options</span><span class="p">:</span>
        <span class="o">-</span> <span class="s2">&quot;force={{ host_fqdn }}&quot;</span>
      <span class="n">ssh_key</span><span class="p">:</span> <span class="s2">&quot;keys/{{ key_name }}&quot;</span>
    <span class="n">ansible_params</span><span class="p">:</span>
      <span class="n">ansible_user</span><span class="p">:</span> <span class="n">root</span>
      <span class="n">ansible_ssh_private_key_file</span><span class="p">:</span> <span class="s2">&quot;keys/{{ key_name }}&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="provisioning-systems-from-openstack">
<span id="openstack-provisioning"></span><h2>Provisioning Systems from OpenStack<a class="headerlink" href="#provisioning-systems-from-openstack" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id1">
<h3>Credentials<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>To authenticate with OpenStack, you will need to have your OpenStack
credentials in your teflo.cfg file, see <a class="reference external" href="credentials.html#openstack-credentials">OpenStack Credentials</a> for more details.</p>
</div>
<div class="section" id="openstack-resource">
<h3>OpenStack Resource<a class="headerlink" href="#openstack-resource" title="Permalink to this headline">¶</a></h3>
<p>The following shows all the possible keys for defining a provisioning
resource for OpenStack using the <strong>openstack-libcloud</strong> provisioner:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="nt">provision</span><span class="p">:</span>
  <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;name&gt;</span>
    <span class="nt">role</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;role&gt;</span>
    <span class="nt">provisioner</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;provisioner&gt;</span>
    <span class="nt">metadata</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;dict_key_values&gt;</span>
    <span class="nt">ansible_params</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;dict_key_values&gt;</span>
    <span class="nt">provider</span><span class="p">:</span>
      <span class="nt">credential</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">openstack-creds</span>
      <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">openstack</span>
      <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;image&gt;</span>
      <span class="nt">flavor</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;flavor&gt;</span>
      <span class="nt">networks</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;networks&gt;</span>
      <span class="nt">floating_ip_pool</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;floating_ip_pool&gt;</span>
      <span class="nt">keypair</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">&lt;keypair&gt;</span>
</pre></div>
</div>
<table border="1" class="colwidths-auto docutils">
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">Description</th>
<th class="head">Type</th>
<th class="head">Required</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>name</td>
<td>The name of the provider (openstack).</td>
<td>String</td>
<td>True</td>
</tr>
<tr class="row-odd"><td>credential</td>
<td>The name of the credentials to use to boot node. This is the one
defined in the credentials section of the teflo config file.</td>
<td>String</td>
<td>True</td>
</tr>
<tr class="row-even"><td>image</td>
<td>The name or ID of the image to boot.</td>
<td>String</td>
<td>True</td>
</tr>
<tr class="row-odd"><td>flavor</td>
<td>The name or ID of the flavor to boot.</td>
<td>String</td>
<td>True</td>
</tr>
<tr class="row-even"><td>networks</td>
<td>The name of the internal network to attach node too.</td>
<td>List</td>
<td>True</td>
</tr>
<tr class="row-odd"><td>floating_ip_pool</td>
<td>The name of the external network to attach node too.</td>
<td>String</td>
<td>False</td>
</tr>
<tr class="row-even"><td>keypair</td>
<td>The name of the keypair to associate the node with.</td>
<td>String</td>
<td>True</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id2">
<h3>Example<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">---</span>

<span class="n">name</span><span class="p">:</span> <span class="n">openstack</span> <span class="n">resource</span>
<span class="n">description</span><span class="p">:</span> <span class="n">define</span> <span class="n">a</span> <span class="n">teflo</span> <span class="n">host</span> <span class="n">openstack</span> <span class="n">resource</span> <span class="n">to</span> <span class="n">be</span> <span class="n">provisioned</span>

<span class="n">provision</span><span class="p">:</span>
  <span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">openstack</span><span class="o">-</span><span class="n">node</span>
    <span class="n">role</span><span class="p">:</span> <span class="n">node</span>
    <span class="n">provider</span><span class="p">:</span>
      <span class="n">name</span><span class="p">:</span> <span class="n">openstack</span>
      <span class="n">credential</span><span class="p">:</span> <span class="n">openstack</span><span class="o">-</span><span class="n">creds</span>
      <span class="n">image</span><span class="p">:</span> <span class="n">rhel</span><span class="o">-</span><span class="mf">7.5</span><span class="o">-</span><span class="n">server</span><span class="o">-</span><span class="n">x86_64</span><span class="o">-</span><span class="n">released</span>
      <span class="n">flavor</span><span class="p">:</span> <span class="n">m1</span><span class="o">.</span><span class="n">small</span>
      <span class="n">networks</span><span class="p">:</span>
        <span class="o">-</span> <span class="s1">&#39;{{ network }}&#39;</span>
      <span class="n">floating_ip_pool</span><span class="p">:</span> <span class="s2">&quot;10.8.240.0&quot;</span>
      <span class="n">keypair</span><span class="p">:</span> <span class="s1">&#39;{{ keypair }}&#39;</span>
    <span class="n">ansible_params</span><span class="p">:</span>
      <span class="n">ansible_user</span><span class="p">:</span> <span class="n">cloud</span><span class="o">-</span><span class="n">user</span>
      <span class="n">ansible_ssh_private_key_file</span><span class="p">:</span> <span class="s2">&quot;keys/{{ keypair }}&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="provisioning-openstack-assets-using-teflo-openstack-client-plugin">
<h2>Provisioning Openstack Assets using teflo_openstack_client_plugin<a class="headerlink" href="#provisioning-openstack-assets-using-teflo-openstack-client-plugin" title="Permalink to this headline">¶</a></h2>
<p>Teflo is offers a plugin <strong>teflo_openstack_client_plugin</strong>. to provision
openstack resources. This plugin utilizes the openstackclient to provision resources.</p>
<p>User can now install this plugin from Teflo</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ pip install teflo<span class="o">[</span>openstack-client-plugin<span class="o">]</span>
</pre></div>
</div>
<p>In your scenario descriptor file specify the <strong>provisioner</strong> key in your provision section.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">provisioner</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">openstack-client</span>
</pre></div>
</div>
<p>For more information on how to install plugin and setup the scenario descriptor file for using this plugin,
please refer <a class="reference external" href="https://gitlab.cee.redhat.com/ccit/teflo/plugins/teflo_openstack_client_plugin">here</a></p>
</div>
<div class="section" id="provisioning-assets-with-linchpin">
<span id="linchpin-provisioning"></span><h2>Provisioning Assets with Linchpin<a class="headerlink" href="#provisioning-assets-with-linchpin" title="Permalink to this headline">¶</a></h2>
<p>Usera can provision assets using all Linchpin supported providers
using the Linchpin plugin.</p>
<p>First the plugin must be installed. Refer to the teflo <a class="reference external" href="install.html">installation</a> document on
how you can install the plugin as an extra package.</p>
<p>You can also refer to the
<a class="reference external" href="https://gitlab.cee.redhat.com/ccit/teflo/plugins/teflo_linchpin_plugin/blob/develop/docs/user.md#installation">plugin</a>
documentation directly</p>
<p>In your scenario file specify the <strong>provisioner</strong> key in your provision section.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">provisioner</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">linchpin-wrapper</span>
</pre></div>
</div>
<p>Specify any of the
<a class="reference external" href="https://github.com/RedHatQE/teflo_linchpin_plugin.git/blob/develop/docs/user.md#provisioning-assets-with-linchpin">keys</a>
supported by the linchpin provisioner.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Users who were using the linchpin provisoiner and using the <strong>provider</strong>
key, we will only be supported for OpenStack and Beaker Providers. It is highly
recommended that users migrate to using the new set of linchpin provisioner keys.
Refer to second example below.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Due to Linchpin’s lack of transactional concurrency support in their database
it is recommended to provision resources sequentially. Refer to the
<a class="reference external" href="../configuration.html#teflo-configuration">task_concurrency</a>
setting in the teflo.cfg to switch the provision task execution
to be sequential.</p>
</div>
<div class="section" id="id3">
<h3>Credentials<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>Since Linchpin support multiple providers, each provider supports different types of parameters.
Linchpin also comes with it’s own ability to pass in credentials. To be flexible, we support the
following options</p>
<blockquote>
<div><ul class="simple">
<li>You can define the credentials in the <em>teflo.cfg</em> and reference
them using the Teflo <em>credential</em> key. In most cases, Teflo will export the provider
specific credential environmental variables supported by Linchpin/Ansible.</li>
<li>You can use the Linchpin <em>credentials</em> option and create the credentials file per
Linchpin provider specification.</li>
<li>You can specify no <em>credential</em> or <em>credentials</em> key and export the specific provider
credential environmental variables supported by Linchpin/Ansible yourself.</li>
</ul>
</div></blockquote>
<p>For more information refer to the plugins
<a class="reference external" href="https://github.com/RedHatQE/teflo_linchpin_plugin.git/blob/develop/docs/user.md#provisioning-assets-with-linchpin">credential</a>
document section.</p>
</div>
<div class="section" id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h3>
<p>Below we will just touch on a couple examples. You can see the rest of the
<a class="reference external" href="https://github.com/RedHatQE/teflo_linchpin_plugin.git/blob/develop/docs/user.md#credentials">examples</a>
in the plugin documentation.</p>
<div class="section" id="example-1">
<h4>Example 1<a class="headerlink" href="#example-1" title="Permalink to this headline">¶</a></h4>
<p>This example uses a PinFile that has already been developed with specific targets in the pinfile.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="nt">provision</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">db2_dummy</span>
  <span class="nt">provisioner</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">linchpin-wrapper</span>
  <span class="nt">pinfile</span><span class="p">:</span>
    <span class="nt">path</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">openstack-simple/PinFile</span>
    <span class="nt">targets</span><span class="p">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">openstack-stage</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">openstack-dev</span>
</pre></div>
</div>
</div>
<div class="section" id="example-2">
<h4>Example 2<a class="headerlink" href="#example-2" title="Permalink to this headline">¶</a></h4>
<p>This example uses the more traditional way of provisioning with Teflo. It’s recommended that users
still using the <strong>provider</strong> key with the Linchpin provisioner should switch over to this style.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nn">---</span>
<span class="nt">provision</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">db2_dummy</span>
  <span class="nt">provisioner</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">linchpin-wrapper</span>
  <span class="nt">credential</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">osp-creds</span>
  <span class="nt">groups</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">example</span>
  <span class="nt">resource_group_type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">openstack</span>
  <span class="nt">resource_definitions</span><span class="p">:</span>
    <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="p p-Indicator">{{</span> <span class="nv">instance | default(&#39;database&#39;)</span> <span class="p p-Indicator">}}</span>
      <span class="nt">role</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">os_server</span>
      <span class="nt">flavor</span><span class="p">:</span> <span class="p p-Indicator">{{</span> <span class="nv">flavor | default(&#39;m1.small&#39;)</span> <span class="p p-Indicator">}}</span>
      <span class="nt">image</span><span class="p">:</span>  <span class="l l-Scalar l-Scalar-Plain">rhel-7.5-server-x86_64-released</span>
      <span class="nt">count</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
      <span class="nt">keypair</span><span class="p">:</span> <span class="p p-Indicator">{{</span> <span class="nv">keypair | default(&#39;db2-test&#39;)</span> <span class="p p-Indicator">}}</span>
      <span class="nt">networks</span><span class="p">:</span>
        <span class="p p-Indicator">-</span> <span class="p p-Indicator">{{</span> <span class="nv">networks | default(&#39;provider_net_ipv6_only&#39;)</span> <span class="p p-Indicator">}}</span>
  <span class="nt">ansible_params</span><span class="p">:</span>
    <span class="nt">ansible_user</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">cloud-user</span>
    <span class="nt">ansible_ssh_private_key_file</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">keys/{{ OS_KEYPAIR }}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="using-linchpin-count">
<h3>Using Linchpin Count<a class="headerlink" href="#using-linchpin-count" title="Permalink to this headline">¶</a></h3>
<p>Teflo supports Linchpin’s count feature to create multiple resources in a single
Asset block. Refer to the example.</p>
<div class="section" id="id4">
<h4>Example<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<p>To create 2 resources in openstack <strong>count: 2</strong> is added.
It’s important to note that when multiple
resources are generated Teflo will save them as two distinct assets.
Assets created using count will be suffixed with a digit starting at 0 up
to the number of resources.</p>
<p>This example will provision 2 resources <em>openstack-node_0</em> and <em>openstack-node_1</em></p>
<p>By default count value is 1.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">provision</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">openstack-node</span>
  <span class="nt">role</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">node</span>
  <span class="nt">provisioner</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">linchpin-wrapper</span>
  <span class="nt">resource_group_type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">openstack</span>
  <span class="nt">resource_definitions</span><span class="p">:</span>
     <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">openstack</span>
       <span class="nt">credential</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">openstack-creds</span>
       <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">rhel-7.5-server-x86_64-released</span>
       <span class="nt">flavor</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">m1.small</span>
       <span class="nt">networks</span><span class="p">:</span>
        <span class="p p-Indicator">-</span> <span class="s">&#39;{{</span><span class="nv"> </span><span class="s">network</span><span class="nv"> </span><span class="s">}}&#39;</span>
       <span class="nt">count</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>
</pre></div>
</div>
<p>the output of results.yml</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">provision</span><span class="p">:</span>
<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">openstack-node_0</span>
  <span class="nt">role</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">node</span>
  <span class="nt">provisioner</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">linchpin-wrapper</span>
  <span class="nt">resource_group_type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">openstack</span>
  <span class="nt">resource_definitions</span><span class="p">:</span>
     <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">openstack</span>
       <span class="nt">credential</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">openstack-creds</span>
       <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">rhel-7.5-server-x86_64-released</span>
       <span class="nt">flavor</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">m1.small</span>
       <span class="nt">networks</span><span class="p">:</span>
        <span class="p p-Indicator">-</span> <span class="s">&#39;{{</span><span class="nv"> </span><span class="s">network</span><span class="nv"> </span><span class="s">}}&#39;</span>
       <span class="nt">count</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>

<span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">openstack-node_1</span>
  <span class="nt">role</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">node</span>
  <span class="nt">provisioner</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">linchpin-wrapper</span>
  <span class="nt">resource_group_type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">openstack</span>
  <span class="nt">resource_definitions</span><span class="p">:</span>
     <span class="p p-Indicator">-</span> <span class="nt">name</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">openstack</span>
       <span class="nt">credential</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">openstack-creds</span>
       <span class="nt">image</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">rhel-7.5-server-x86_64-released</span>
       <span class="nt">flavor</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">m1.small</span>
       <span class="nt">networks</span><span class="p">:</span>
        <span class="p p-Indicator">-</span> <span class="s">&#39;{{</span><span class="nv"> </span><span class="s">network</span><span class="nv"> </span><span class="s">}}&#39;</span>
       <span class="nt">count</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="generating-ansible-inventory">
<h3>Generating Ansible Inventory<a class="headerlink" href="#generating-ansible-inventory" title="Permalink to this headline">¶</a></h3>
<p>Both Teflo and Linchpin have the capability to generate inventory files post
provisioning. For those that want Teflo to continue to generate the Inventory
file and use the Linchpin provisioner as just a pure provisioner can do so
by specifying the following keys</p>
<blockquote>
<div><ul class="simple">
<li>roles/group</li>
<li>ansible_params</li>
</ul>
</div></blockquote>
<p>Refer to Example 2 above in the examples section.</p>
<p>For those that want to use Linchpin to generate the inventory file. You must do the following</p>
<blockquote>
<div><ul class="simple">
<li>Specify the <strong>layout</strong> key and either provide a dictionary of a Linchpin layout or provide
a path to a layout file in your workspace.</li>
<li>Do NOT specify <strong>roles/group</strong> and <strong>ansible_params</strong> keys</li>
</ul>
</div></blockquote>
<p>Refer to examples 6 and 8 in the Linchpin plugin documents to see the two variations.</p>
</div>
</div>
<div class="section" id="defining-static-machines">
<h2>Defining Static Machines<a class="headerlink" href="#defining-static-machines" title="Permalink to this headline">¶</a></h2>
<p>There may be scenarios where you already have machines provisioned and would
like teflo to use these static machines.  This option is supported in teflo.
The main key that needs to be stated is the <strong>ip_address</strong>.</p>
<p>The following is an example of a statically defined machine:</p>
<div class="section" id="id5">
<h3>Example<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">---</span>
<span class="n">name</span><span class="p">:</span> <span class="n">static</span> <span class="n">resource</span>
<span class="n">description</span><span class="p">:</span> <span class="n">define</span> <span class="n">a</span> <span class="n">static</span> <span class="n">resource</span> <span class="n">to</span> <span class="n">be</span> <span class="n">used</span> <span class="n">throughout</span> <span class="n">teflo</span>

<span class="n">provision</span><span class="p">:</span>
  <span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">static</span><span class="o">-</span><span class="n">node</span>
    <span class="n">role</span><span class="p">:</span> <span class="n">node</span>
    <span class="n">ip_address</span><span class="p">:</span> <span class="mf">1.1</span><span class="o">.</span><span class="mf">1.1</span>
    <span class="n">ansible_params</span><span class="p">:</span>
      <span class="n">ansible_user</span><span class="p">:</span> <span class="n">root</span>
      <span class="n">ansible_ssh_private_key_file</span><span class="p">:</span> <span class="s2">&quot;keys/{{ key_name }}&quot;</span>
</pre></div>
</div>
<p>There may also be a scenario where you want to run cmds or scripts on the
local system instead of the provisioned resources.  Refer to the
<a class="reference external" href="../localhost.html">localhost</a> page for more details.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="orchestrate.html" class="btn btn-neutral float-right" title="Orchestrate" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="include.html" class="btn btn-neutral float-left" title="Including Scenarios" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Red Hat Inc.

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>