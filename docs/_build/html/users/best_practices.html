

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Best Practices &mdash; Teflo 0.1.2 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_override.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../',
              VERSION:'0.1.2',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Using Localhost" href="localhost.html" />
    <link rel="prev" title="Examples" href="examples.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> Teflo
          

          
          </a>

          
            
            
              <div class="version">
                0.1.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Installation &amp; Configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="install.html">Install Teflo</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configure Teflo</a></li>
</ul>
<p class="caption"><span class="caption-text">Using Teflo</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">User’s Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html#detailed-information">Detailed Information</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="scenario_descriptor.html">Scenario Descriptor</a></li>
<li class="toctree-l2"><a class="reference internal" href="data_pass_through.html">Data Pass-through</a></li>
<li class="toctree-l2"><a class="reference internal" href="output.html">Teflo Output</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Best Practices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#data-pass-through">Data pass-through</a></li>
<li class="toctree-l3"><a class="reference internal" href="#scenario-structure">Scenario Structure</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#teflo-files">Teflo Files</a></li>
<li class="toctree-l4"><a class="reference internal" href="#source">Source</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#handing-off-a-scenario">Handing Off A Scenario</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="localhost.html">Using Localhost</a></li>
<li class="toctree-l2"><a class="reference internal" href="variable_data.html">Using Jinja Variable Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="resource_labels.html">Using Resource Labels</a></li>
<li class="toctree-l2"><a class="reference internal" href="faqs.html">FAQS</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Teflo Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../developers/index.html">Developer’s Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contact.html">Contacts</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Teflo</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">User’s Guide</a> &raquo;</li>
        
      <li>Best Practices</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/users/best_practices.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="best-practices">
<h1>Best Practices<a class="headerlink" href="#best-practices" title="Permalink to this headline">¶</a></h1>
<div class="section" id="data-pass-through">
<h2>Data pass-through<a class="headerlink" href="#data-pass-through" title="Permalink to this headline">¶</a></h2>
<p>Please visit the following <a class="reference external" href="data_pass_through.html">page</a> to understand how
you can pass data within teflo tasks.</p>
</div>
<div class="section" id="scenario-structure">
<h2>Scenario Structure<a class="headerlink" href="#scenario-structure" title="Permalink to this headline">¶</a></h2>
<p>The intended focus of this section is to provide a standard structure for
building multi product scenarios. This is just a standard that can be adopted,
as a best practice, but is not required for running teflo. Having a solid
structure as a foundation will help lead to easier maintenance during the
scenarios lifespan. Along with faster turn around for creating new multi
product scenarios.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The advantage to a standard structure allows for other users to easily
re-run &amp; update a scenario in their environment with minimal effort.
It will also help with consistency in teflo’s usage, making it easier
to understand someone’s scenario.</p>
</div>
<p>Below is a tree formatted scenario structure for a multi product scenario.
This references the scenario <a class="reference external" href="https://gitlab.cee.redhat.com/qeet/teflo/mpqe-scenario-template">template</a>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>template/
├── ansible
├── ansible.cfg
├── teflo.cfg
├── jenkins
│   ├── build
│   │   ├── ansible.cfg
│   │   ├── auth.ini
│   │   ├── build.sh
│   │   ├── hosts
│   │   └── site.yml
│   ├── Jenkinsfile
│   └── job.yml
├── keys
├── Makefile
├── README.rst
├── scenario.yml
├── common_scenario.yml
└── tests
</pre></div>
</div>
<p>The above scenario structure has additional files that are not required for
executing teflo. The extra files are used for easily running the scenario
from a Jenkins job. Below are two sections which go into more detail regarding
each file.</p>
<div class="section" id="teflo-files">
<h3>Teflo Files<a class="headerlink" href="#teflo-files" title="Permalink to this headline">¶</a></h3>
<p>Based on the standard scenario structure, lets review the directories and files
which teflo consumes.  For now, the jenkins directory and the Makefile will
be ignored as they are related to creating a Jenkins job and not required for
executing teflo.</p>
<table border="1" class="colwidths-auto docutils">
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Description</th>
<th class="head">Required</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>ansible</td>
<td>The ansible directory is where you can define any ansible files
(roles, playbooks, etc) that your scenario needs to use. Teflo will
load and use these files as stated within your scenario descriptor
file.</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>ansible.cfg</td>
<td>The ansible.cfg defines any settings for ansible that you wish to
override their default values. It is <strong>highly</strong> recommend for each
scenario to define their own file.</td>
<td>No</td>
</tr>
<tr class="row-even"><td>teflo.cfg</td>
<td>This is a required teflo configuration file.  It is recommended to
remove the credentials in the file so the credentials are not under
source control; however, when running you can either update the
credentials or save the credentials in another teflo.</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>keys</td>
<td>The keys directory is an optional directory to set ssh keys used for
contacting the machines in the scenario.</td>
<td>No</td>
</tr>
<tr class="row-even"><td>scenario.yml</td>
<td>The scenario.yml is your scenario descriptor file. This file
describes your entire E2E multi product scenario.</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>common_scenario.yml</td>
<td>This is the scenario file used in the include section of the scenario.yml.</td>
<td>No</td>
</tr>
<tr class="row-even"><td>tests</td>
<td>This is a directory where all the tests that are run during the
execution are stored.</td>
<td>No</td>
</tr>
</tbody>
</table>
<p>With this scenario structure you can easily run teflo from the command line
or from a Jenkins job.  See the following section for more details.</p>
</div>
<div class="section" id="source">
<h3>Source<a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h3>
<p>The source for this template scenario structure and details on running the
scenario can be found here: <a class="reference external" href="https://gitlab.cee.redhat.com/qeet/teflo/mpqe-scenario-template">template</a>.</p>
</div>
</div>
<div class="section" id="handing-off-a-scenario">
<h2>Handing Off A Scenario<a class="headerlink" href="#handing-off-a-scenario" title="Permalink to this headline">¶</a></h2>
<p>After you successfully created a scenario descriptor file that describes an
end to end scenario, it should take minimal effort to hand off the scenario
for someone else to run. Especially if you followed the previous topic for
a baseline for your <a class="reference external" href="best_practices.html#scenario-structure">scenario structure</a>. You need to send all your files in
the scenario structure, and tell them to make minor modifications, which are
described below:</p>
<p>If the person handing off the scenario is using the same tools for
provisioning (i.e. all your machines are provisioned using OpenStack
and you hand off to someone else to run the scenario who also plans
to provision their resources using OpenStack), it is really simple. You just
need to follow the following steps:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Tell them to set their credentials for their resource in their <a class="reference external" href="configuration.html#teflo-configuration">teflo.cfg</a> file, using the same name that you
used in your scenario descriptor file.  A good tip would be to give them
your teflo.cfg file with your <a class="reference external" href="definitions/credentials.html#credentials">credentials</a>  removed.  Also if using the
recommend scenario structure, you should be able to tell the user to set
their credentials in a separate teflo.cfg file that they refrence with the
<strong>TEFLO_SETTINGS</strong> environment variable prior to running teflo.</li>
<li>Tell them to update references to the ssh keys that you used for machine
access.</li>
</ol>
</div></blockquote>
<p>If you are handing off to a person that plans to use a different tool for
provisioning this can be more complicated.  A good tip for this case would
be to tell them provision their systems first and inject the driver machine’s
ssh key into all the machines, and then redefine their systems in teflo
as <a class="reference external" href="definitions/provision.html#definining-static-machines">static machines</a>.
If this is not an option, the user would have to
redefine each of their systems with the correct keys for the provisioning
system they plan to use.  Please see the <a class="reference external" href="definitions/provision.html#provision">provisioning</a> documentation for all options.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="localhost.html" class="btn btn-neutral float-right" title="Using Localhost" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="examples.html" class="btn btn-neutral float-left" title="Examples" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Red Hat Inc.

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>