

<!DOCTYPE html>
<html class="writer-html4" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Configure Teflo &mdash; Teflo 0.1.2 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_override.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../',
              VERSION:'0.1.2',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="User’s Guide" href="index.html" />
    <link rel="prev" title="Install Teflo" href="install.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> Teflo
          

          
          </a>

          
            
            
              <div class="version">
                0.1.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Installation &amp; Configuration</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Install Teflo</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Configure Teflo</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#inventory-folder">inventory_folder</a></li>
<li class="toctree-l2"><a class="reference internal" href="#task-concurrency">task_concurrency</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Using Teflo</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="index.html">User’s Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html#detailed-information">Detailed Information</a></li>
</ul>
<p class="caption"><span class="caption-text">Teflo Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../developers/index.html">Developer’s Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contact.html">Contacts</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Teflo</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Configure Teflo</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/users/configuration.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="configure-teflo">
<h1>Configure Teflo<a class="headerlink" href="#configure-teflo" title="Permalink to this headline">¶</a></h1>
<p>This is a mandatory configuration file, where you set your credentials, and
there are many optional settings to help you adjust your usage of Teflo.
The credentials of the configuration file is the only thing that
is mandatory.  Most of the other default configuration settings should be
sufficient; however, please read through the options you have.</p>
<p>Where it is loaded from (using precedence low to high):</p>
<ol class="arabic simple">
<li>/etc/teflo/teflo.cfg</li>
<li>./teflo.cfg (current working directory)</li>
<li>TEFLO_SETTINGS environment variable to the location of the file</li>
</ol>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">It is important to realize if you have a configuration file set using
both options, the configuration files will be combined, and common
key values will be overridden by the higher precedent option, which will
be the TEFLO_SETTINGS environment variable.</p>
</div>
<p>Configuration example (with all options):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># teflo config file</span>
<span class="c1"># ==================</span>

<span class="c1"># the config file provides an additional way to define teflo parameters</span>

<span class="c1"># config file is searched for in the following order below. a configuration</span>
<span class="c1"># setting will be overrided if another source is found last</span>
<span class="c1">#   1. /etc/teflo/teflo.cfg</span>
<span class="c1">#   2. ./teflo.cfg (current working directory)</span>
<span class="c1">#   3. TEFLO_SETTINGS (environment variable)</span>

<span class="c1"># default settings</span>

<span class="p">[</span><span class="n">defaults</span><span class="p">]</span>
<span class="n">log_level</span><span class="o">=</span><span class="n">debug</span>
<span class="c1"># Path for teflo&#39;s data folder where teflo logs will be stored</span>
<span class="n">data_folder</span><span class="o">=/</span><span class="n">var</span><span class="o">/</span><span class="n">local</span><span class="o">/</span><span class="n">teflo</span>
<span class="n">workspace</span><span class="o">=.</span>
<span class="c1"># Endpoint URL of Cachet Status page</span>
<span class="c1"># Cachet status page.</span>
<span class="n">resource_check_endpoint</span><span class="o">=&lt;</span><span class="n">endpoint_</span> <span class="n">url_for_dependency_check</span><span class="o">&gt;</span>
<span class="c1">#</span>
<span class="c1"># A static inventory path can be used for ansible inventory file.</span>
<span class="c1"># Can be relative path in teflo scenario workspace</span>
<span class="c1"># inventory_folder=static/inventory</span>
<span class="c1">#</span>
<span class="c1"># Can be a directory in the user $HOME path</span>
<span class="c1"># inventory_folder=~/scenario/static/inventory</span>
<span class="c1">#</span>
<span class="c1"># Can be an absolute path</span>
<span class="c1"># inventory_folder=/test/scenario/static/inventory</span>
<span class="c1">#</span>
<span class="c1"># Can be a path containing an environment variable</span>
<span class="c1"># inventory_folder=$WORKSPACE/scenario/static/inventory</span>
<span class="c1"># default value of the inventory folder is &#39;TEFLO_DATA_FOLDER/.results/inventory&#39;</span>
<span class="n">inventory_folder</span><span class="o">=&lt;</span><span class="n">path</span> <span class="k">for</span> <span class="n">ansible</span> <span class="n">inventory</span> <span class="n">files</span><span class="o">&gt;</span>
<span class="c1"># credentials file and Vault password</span>
<span class="c1"># User can set all teh credential information in a text file and encrypt it using ansible vault</span>
<span class="c1"># provide the path in under CREDENTIALS_PATH. Provide the vault password here. This password can be</span>
<span class="c1"># exported as an environmental variable</span>
<span class="n">CREDENTIAL_PATH</span><span class="o">=&lt;</span><span class="n">path</span> <span class="k">for</span> <span class="n">the</span> <span class="n">credetials</span> <span class="n">txt</span> <span class="n">file</span><span class="o">&gt;</span>
<span class="n">VAULTPASS</span><span class="o">=&lt;</span><span class="n">ansible</span> <span class="n">vault</span> <span class="n">password</span><span class="o">&gt;</span>


<span class="c1"># time out for each stage</span>
<span class="c1"># you can set the timeout value for each of teflo&#39;s stages (validation, provision, orchestrate, execute, report and cleanup)</span>
<span class="p">[</span><span class="n">timeout</span><span class="p">]</span>
<span class="n">provision</span><span class="o">=</span><span class="mi">500</span>
<span class="n">cleanup</span><span class="o">=</span><span class="mi">1000</span>
<span class="n">orchestrate</span><span class="o">=</span><span class="mi">300</span>
<span class="n">execute</span><span class="o">=</span><span class="mi">200</span>
<span class="n">report</span><span class="o">=</span><span class="mi">100</span>
<span class="n">validate</span><span class="o">=</span><span class="mi">10</span>


<span class="c1"># credentials settings</span>

<span class="p">[</span><span class="n">credentials</span><span class="p">:</span><span class="n">beaker</span><span class="o">-</span><span class="n">creds</span><span class="p">]</span>
<span class="n">hub_url</span><span class="o">=&lt;</span><span class="n">hub_url</span><span class="o">&gt;</span>
<span class="n">keytab</span><span class="o">=&lt;</span><span class="n">keytab</span><span class="o">&gt;</span>
<span class="n">keytab_principal</span><span class="o">=&lt;</span><span class="n">keytab_principal</span><span class="o">&gt;</span>
<span class="n">username</span><span class="o">=&lt;</span><span class="n">username</span><span class="o">&gt;</span>
<span class="n">password</span><span class="o">=&lt;</span><span class="n">password</span><span class="o">&gt;</span>

<span class="p">[</span><span class="n">credentials</span><span class="p">:</span><span class="n">openstack</span><span class="o">-</span><span class="n">creds</span><span class="p">]</span>
<span class="n">auth_url</span><span class="o">=&lt;</span><span class="n">auth_url</span><span class="o">&gt;</span>
<span class="n">tenant_name</span><span class="o">=&lt;</span><span class="n">tenant_name</span><span class="o">&gt;</span>
<span class="n">username</span><span class="o">=&lt;</span><span class="n">username</span><span class="o">&gt;</span>
<span class="n">password</span><span class="o">=&lt;</span><span class="n">password</span><span class="o">&gt;</span>
<span class="n">domain_name</span><span class="o">=&lt;</span><span class="n">domain_name</span><span class="o">&gt;</span>

<span class="c1"># orchestrator settings</span>

<span class="p">[</span><span class="n">orchestrator</span><span class="p">:</span><span class="n">ansible</span><span class="p">]</span>
<span class="c1"># remove ansible log</span>
<span class="n">log_remove</span><span class="o">=</span><span class="kc">False</span>
<span class="c1"># set the verbosity</span>
<span class="c1"># this option will override the max verbosity when log level is set to debug.</span>
<span class="n">verbosity</span><span class="o">=</span><span class="n">vv</span>

<span class="p">[</span><span class="n">task_concurrency</span><span class="p">]</span>
<span class="c1"># this controls how tasks (provision, orchestrate, execute, report) are executed</span>
<span class="c1"># by Teflo either parallel or sequential.</span>
<span class="c1"># When set to False the task will execute sequentially.</span>
<span class="n">provision</span><span class="o">=</span><span class="kc">False</span>


<span class="c1"># executor settings</span>

<span class="p">[</span><span class="n">executor</span><span class="p">:</span><span class="n">runner</span><span class="p">]</span>
<span class="c1"># set the testrun_results to false if you dont want it to be collected in the logs for the xml files collected during</span>
<span class="c1"># execution</span>
<span class="n">testrun_results</span><span class="o">=</span><span class="kc">False</span>
<span class="c1"># Teflo by default will NOT exit if the collection of artifact task fails. In order to exit the run on an error during</span>
<span class="c1"># collection of artifacts user can set this field to true , else False or ignore the field.</span>
<span class="n">exit_on_error</span><span class="o">=</span><span class="kc">True</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Many of the configuration options can be overridden by passing cli options when running
teflo. See the options in the running teflo <a class="reference external" href="quickstart.html#run">example.</a></p>
</div>
<div class="section" id="inventory-folder">
<h2>inventory_folder<a class="headerlink" href="#inventory-folder" title="Permalink to this headline">¶</a></h2>
<p>The <strong>inventory_folder</strong> option is not a required option but it is important enough to note its usage.
By default teflo will create an inventory directory containing ansible inventory files in its data
directory. These are used during orchestration and execution. Refer to the <a class="reference external" href="output.html">Teflo Output</a>
page.</p>
<p>Some times this is not desired behavior. This option allows a user to specify a static known directory
that Teflo can use to place the ansible inventory files. If the specified directory does not exist,
teflo will create it and place the ansible inventory files. If it does, teflo will only place the
ansible files in the directory. Teflo will then use this static directory during orchestrate and execution.</p>
</div>
<div class="section" id="task-concurrency">
<h2>task_concurrency<a class="headerlink" href="#task-concurrency" title="Permalink to this headline">¶</a></h2>
<p>The <strong>task_concurrency</strong> option is used to control how tasks are executed by Teflo. Whether it should be sequential
or in parallel/concurrent. Below is the default execution type of each of the Teflo tasks:</p>
<table border="1" class="colwidths-auto docutils">
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">Concurrent</th>
<th class="head">Type</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>validate</td>
<td>True</td>
<td>String</td>
</tr>
<tr class="row-odd"><td>provision</td>
<td>True</td>
<td>String</td>
</tr>
<tr class="row-even"><td>orchestrate</td>
<td>False</td>
<td>String</td>
</tr>
<tr class="row-odd"><td>execute</td>
<td>False</td>
<td>String</td>
</tr>
<tr class="row-even"><td>report</td>
<td>False</td>
<td>String</td>
</tr>
</tbody>
</table>
<p>There are cases where it makes sense to adjust the execution type. Below are some examples:</p>
<p>There are cases when provisioning assets of different types that there might be an inter-dependency so executing
the tasks in parallel will not suffice, i.e. provision a virtual network and a VM attached to that network.
In that case, set the <strong>provision=False</strong> and arrange the assets in the scenario descriptor file in
the proper sequential order.</p>
<p>There are cases when you need to import the same test artifact into separate reporting systems but one reporting
systems needs the data in the test artifact to be modified with metadata before it can be imported.
i.e modify and import into Polarion with Polarion metadata and then import that same artifact into Report Portal.
In that case, set the <strong>report=False</strong> and arrange the resources defined in the scenario descriptor file in the
proper sequential order.</p>
<p>There could be a case where you would like to execute two different test suites concurrently because they have
no dependency on each other or there is no affect to each other. In that case, set the <strong>execute=True</strong> to have
them running concurrently.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="index.html" class="btn btn-neutral float-right" title="User’s Guide" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="install.html" class="btn btn-neutral float-left" title="Install Teflo" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Red Hat Inc.

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>